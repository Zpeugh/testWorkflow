function appendField(e,t,n){$(".buttons").hide();$.ajax({type:"POST",data:e.parents("form:first").serialize(),url:"/projectmanager/formTemplate/"+n,success:function(e,n){$("#"+t).html(e)}});return false}function updateField(e,t,n){$(".buttons").hide();$.ajax({type:"POST",data:e.parents("form:first").serialize(),url:"/projectmanager/formTemplate/"+n,success:function(e,n){$("#"+t).html(e)}});return false}function addAdditionalField(e){return appendField(e,"editFieldPropertiesArea","add_additional_field")}function addField(e){return appendField(e,"editFieldArea","add_field")}function editField(e){return updateField(e,"editFieldArea","edit_field")}function editAdditionalField(e){return updateField(e,"editFieldPropertiesArea","edit_additional_field")}function createChoiceField(e,t){paragraph=$(document.createElement("p"));input_area=$(document.createElement("input"));remove_button=$(document.createElement("input"));remove_button_span=$(document.createElement("span"));paragraph.attr("id","choice_set_"+t+"_"+e);input_area.attr("name","field_options.choice_"+t);input_area.attr("type","text");input_area.attr("value","");remove_button.attr("type","image");remove_button.attr("name","remove");remove_button.attr("src","/projectmanager/images/close.png");remove_button_span.attr("class","remove");remove_button_span.append(remove_button);paragraph.append(input_area);paragraph.append(remove_button_span);return paragraph}var row_count=0;var count=1;var suffix="";var first=true;var input_area,paragraph,remove_button,remove_button_span,index;$(".add_table_row").live("click",function(){suffix=$(this).attr("name");row_count=$("#table"+suffix).children().size();clone=$("#row_0"+suffix).clone(true);clone.attr("name","row_"+row_count+suffix);clone.attr("id","row_"+row_count+suffix);clone.attr("style","");if(row_count%2===0){clone.attr("class","tblevenrowcolor")}else{clone.attr("class","tbloddrowcolor")}clone.insertBefore("#add_more_options"+suffix);row_count=row_count+1;return false});$(".add_choice_field").live("click",function(){suffix=$(this).attr("name");if(first){count=$("#group_"+suffix).children().size()-1;first=false}paragraph=createChoiceField(suffix,count);$("#add_more_options_"+suffix).before(paragraph);count=count+1;paragraph.children().first().focus();return true});$(".remove").live("click",function(){$(this).parent().remove()})